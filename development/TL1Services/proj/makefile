##
##  Copyright(c) Tellabs Transport Group Inc. All rights reserved.
##
##
##  ---------------------------------------------------------------------------
##
## Makefile for TL1 Services subsystem
##

##-----------------------------------------------------------------------------
## Template for subsystem makefile:
## 
## Generates a subsystem library from the submodule's libraries. Submodule 
## libraries will be generated by an embedded 'make' call on their makefiles. 
## Makefiles are assumed to be in the directory '<SubModuleName>/proj/' found 
## directly under the subsystem's directory. E.g. '../FC/Shell/proj' where 'FC' 
## is the subsystem and 'Shell' the submodule.

#==============================================================================
# User section:
# -Assign the subsystem library name to 'MYLIB'. Replace 'subsys_lib_name'.
# -Assign the submodules directory names to 'MYSUBMODULES' on separate lines
#  (case sensitive). Replace 'Module_1' and 'Module_2'.
# -Assign the name of the submodule libraries to 'MYLIBOBJS'. Replace 'Module_1' 
#  and 'Module_2'
#
#==============================================================================

MYLIB  = TL1Services

MYSUBMODULES=\
    TL1Core \
    Facade \
    Response \

MYLIBOBJS=\
    $(LIBDIR)/$(LIB_PREFIX)TL1Core$(LIB_SUFFIX) \
    $(LIBDIR)/$(LIB_PREFIX)Facade$(LIB_SUFFIX) \
    $(LIBDIR)/$(LIB_PREFIX)Response$(LIB_SUFFIX) \

#===============================================================================
# Build specific section:
# 
# All commands in targets must include a call to the predefined macro 
# $(subst from,to,text) to substitute '/' or '\' to the correct path name 
# separator according to the target specific makerules.
#
# Commands to be executed in the same shell must be on the same line and 
# bound together with '&&'. E.g. 'cd' and 'make' must be executed in the same 
# shell in order to obtain a make command in the appropriate directory.
#===============================================================================

MAKERULES       = $(TTG_ROOT)/proj/makerules.$(PLATFORM)
PRJINCPATH      =  
PRJLIBPATH      =   
PRJLIBS         =   
PRJDEFINES      = 
MERGE_LIBNAME = TL1Services

.NOTPARALLEL: $(MYSUBMODULES)
default : $(MYLIB)_$(PLATFORM)
all     : default

include $(MAKERULES)


ifeq ($(PLATFORM),WIN32)
  $(MYLIB)_WIN32 : $(MYLIB)
else
  $(MYLIB)_$(PLATFORM) : $(MYSUBMODULES)
endif


$(MYSUBMODULES):
	@echo ***Making $@ for $(PLATFORM)...
	@cd $(subst $(ANTISLASH),$(SLASH),../$@/proj) && \
	$(MAKE)   \
	CARD=$(CARD)

$(MYLIB): $(MYSUBMODULES)
	@echo ***Making $@ for $(PLATFORM)...
	@$(MAKE)   \
	OBJS="$(MYLIBOBJS)" \
	LIBNAME=$(MYLIB) \
	$(MAKETARGET:default=library)


