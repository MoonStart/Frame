##
##  Copyright(c) Tellabs Transport Group Inc. All rights reserved.
##
##
##  ---------------------------------------------------------------------------
##
## Makefile for Telecom Services subsystem
##

##-----------------------------------------------------------------------------
## Template for subsystem makefile:
## 
## Generates a subsystem library from the submodule's libraries. Submodule 
## libraries will be generated by an embedded 'make' call on their makefiles. 
## Makefiles are assumed to be in the directory '<SubModuleName>/proj/' found 
## directly under the subsystem's directory. E.g. '../FC/Shell/proj' where 'FC' 
## is the subsystem and 'Shell' the submodule.
	
#==============================================================================
# User section:
# -Assign the subsystem library name to 'MYLIB'. Replace 'subsys_lib_name'.
# -Assign the submodules directory names to 'MYSUBMODULES' on separate lines
#  (case sensitive). Replace 'Module_1' and 'Module_2'.
# -Assign the name of the submodule libraries to 'MYLIBOBJS'. Replace 'Module_1' 
#  and 'Module_2'
#
#==============================================================================

MYLIB  = TS

MYSUBMODULES=\
     SNMP \
     PM \
     EPM \
     CUD \
     Configuration \
     Monitoring \
     TelCommon \
     TsPii \
     Alarm \
     SignalProtection \
     XC \
     PowerManagement


MYLIBOBJS=\
     $(TTG_TSDIR)/SNMP/proj/$(LIBDIR)/$(LIB_PREFIX)SnmpGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/PM/proj/$(LIBDIR)/$(LIB_PREFIX)PmGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/EPM/proj/$(LIBDIR)/$(LIB_PREFIX)EpmGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/CUD/proj/$(LIBDIR)/$(LIB_PREFIX)CudGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/TelCommon/proj/$(LIBDIR)/$(LIB_PREFIX)TelCommon$(LIB_SUFFIX) \
     $(TTG_TSDIR)/Configuration/proj/$(LIBDIR)/$(LIB_PREFIX)CFGGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/Monitoring/proj/$(LIBDIR)/$(LIB_PREFIX)MONGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/TsPii/proj/$(LIBDIR)/$(LIB_PREFIX)TsPii$(LIB_SUFFIX) \
     $(TTG_TSDIR)/Alarm/proj/$(LIBDIR)/$(LIB_PREFIX)AlarmGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/SignalProtection/proj/$(LIBDIR)/$(LIB_PREFIX)SPGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/XC/proj/$(LIBDIR)/$(LIB_PREFIX)XCGeneric$(LIB_SUFFIX) \
     $(TTG_TSDIR)/PowerManagement/proj/$(LIBDIR)/$(LIB_PREFIX)PWRGeneric$(LIB_SUFFIX)




#===============================================================================
# Build specific section:
# 
# All commands in targets must include a call to the predefined macro 
# $(subst from,to,text) to substitute '/' or '\' to the correct path name 
# separator according to the target specific makerules.
#
# Commands to be executed in the same shell must be on the same line and 
# bound together with '&&'. E.g. 'cd' and 'make' must be executed in the same 
# shell in order to obtain a make command in the appropriate directory.
#===============================================================================

MAKERULES       = $(TTG_ROOT)/proj/makerules.$(PLATFORM)
PRJINCPATH      =  
PRJLIBPATH      =   
PRJLIBS         =   
PRJDEFINES      = 
MERGE_LIBNAME = TS

.NOTPARALLEL: $(MYSUBMODULES)
default : $(MYLIB)_$(PLATFORM)
all     : default


include $(MAKERULES)
ifeq ($(PLATFORM),WIN32)
    DBGFLAGS = $(Z7DBGFLAGS)  #include the debug info into object instead of pdb file.
endif


$(MYLIB)_WIN32 : $(MYLIB)

$(MYLIB)_PSOSP : $(MYSUBMODULES)

$(MYLIB)_VXWRKS: $(MYSUBMODULES)

$(MYLIB)_VXWRKS67: $(MYSUBMODULES)

$(MYLIB)_SUN   : $(MYSUBMODULES)

$(MYLIB)_LINUX : $(MYSUBMODULES)

$(MYLIB)_WRLINUX : $(MYSUBMODULES)

$(MYLIB)_WRLINUX_QEMU : $(MYSUBMODULES)

$(MYLIB)_QORIQ : $(MYSUBMODULES)

$(MYLIB)_QORIQ50 : $(MYSUBMODULES)

$(MYLIB)_QORIQ_SIM : $(MYSUBMODULES)

$(MYLIB)_QORIQ50_QEMU : $(MYSUBMODULES)

$(MYLIB)_PICO_QORIQ : $(MYSUBMODULES)

$(MYLIB)_PICO_QEMU : $(MYSUBMODULES)

$(MYSUBMODULES):
	@echo ***Making $@ for $(PLATFORM)...
	@cd $(subst $(ANTISLASH),$(SLASH),../$@/proj) && \
	$(MAKE)   \
	CARD=$(CARD)

$(MYLIB): $(MYSUBMODULES)
	@echo ***Making $@ for $(PLATFORM)...
	@$(MAKE)   \
	OBJS="$(MYLIBOBJS)" \
	LIBNAME=$(MYLIB) \
	$(MAKETARGET:default=library)

